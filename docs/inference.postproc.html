

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>inference.postproc &mdash; HOPE-Segmenter-Kids 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="https://docs.hope4kids.io/HOPE-Segmenter-Kids/inference.postproc.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f2a433a1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="inference.pp_cluster" href="inference.pp_cluster.html" />
    <link rel="prev" title="inference.nnunet" href="inference.nnunet.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            HOPE-Segmenter-Kids
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">inference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="inference.ensembler.html">inference.ensembler</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.mednext.html">inference.mednext</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.nnunet.html">inference.nnunet</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">inference.postproc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-segmenter_backend.inference.postproc.postprocess">inference.postproc.postprocess</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.convert_ed_to_ncr"><code class="docutils literal notranslate"><span class="pre">convert_ed_to_ncr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.convert_et_to_ncr"><code class="docutils literal notranslate"><span class="pre">convert_et_to_ncr()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.convert_labels_back_to_BraTS"><code class="docutils literal notranslate"><span class="pre">convert_labels_back_to_BraTS()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_connected_labels"><code class="docutils literal notranslate"><span class="pre">get_connected_labels()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_greatest_label"><code class="docutils literal notranslate"><span class="pre">get_greatest_label()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_ed_wt"><code class="docutils literal notranslate"><span class="pre">get_ratio_ed_wt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_et_wt"><code class="docutils literal notranslate"><span class="pre">get_ratio_et_wt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_ncr_wt"><code class="docutils literal notranslate"><span class="pre">get_ratio_ncr_wt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_tc_wt"><code class="docutils literal notranslate"><span class="pre">get_ratio_tc_wt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.maybe_make_dir"><code class="docutils literal notranslate"><span class="pre">maybe_make_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.postprocess_batch"><code class="docutils literal notranslate"><span class="pre">postprocess_batch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.postprocess_image"><code class="docutils literal notranslate"><span class="pre">postprocess_image()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.read_image"><code class="docutils literal notranslate"><span class="pre">read_image()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.redefine_et_ed_labels"><code class="docutils literal notranslate"><span class="pre">redefine_et_ed_labels()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.remove_disconnected"><code class="docutils literal notranslate"><span class="pre">remove_disconnected()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.remove_disconnected_from_dir"><code class="docutils literal notranslate"><span class="pre">remove_disconnected_from_dir()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess.save_image"><code class="docutils literal notranslate"><span class="pre">save_image()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-segmenter_backend.inference.postproc.postprocess_cc">inference.postproc.postprocess_cc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.get_cluster_files"><code class="docutils literal notranslate"><span class="pre">get_cluster_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.get_connected_components"><code class="docutils literal notranslate"><span class="pre">get_connected_components()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.get_files"><code class="docutils literal notranslate"><span class="pre">get_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_cluster"><code class="docutils literal notranslate"><span class="pre">get_thresholds_cluster()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_task"><code class="docutils literal notranslate"><span class="pre">get_thresholds_task()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.parse_args"><code class="docutils literal notranslate"><span class="pre">parse_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.postprocess_batch"><code class="docutils literal notranslate"><span class="pre">postprocess_batch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.postprocess_cc"><code class="docutils literal notranslate"><span class="pre">postprocess_cc()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment"><code class="docutils literal notranslate"><span class="pre">read_cluster_assignment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment_df"><code class="docutils literal notranslate"><span class="pre">read_cluster_assignment_df()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_cc.remove_small_component"><code class="docutils literal notranslate"><span class="pre">remove_small_component()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-segmenter_backend.inference.postproc.postprocess_lblredef">inference.postproc.postprocess_lblredef</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_cluster_files"><code class="docutils literal notranslate"><span class="pre">get_cluster_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_files"><code class="docutils literal notranslate"><span class="pre">get_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_ratio_labels_wt"><code class="docutils literal notranslate"><span class="pre">get_ratio_labels_wt()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_cluster"><code class="docutils literal notranslate"><span class="pre">get_thresholds_cluster()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_task"><code class="docutils literal notranslate"><span class="pre">get_thresholds_task()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.label_redefinition"><code class="docutils literal notranslate"><span class="pre">label_redefinition()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.parse_args"><code class="docutils literal notranslate"><span class="pre">parse_args()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_batch"><code class="docutils literal notranslate"><span class="pre">postprocess_batch()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_lblredef"><code class="docutils literal notranslate"><span class="pre">postprocess_lblredef()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment"><code class="docutils literal notranslate"><span class="pre">read_cluster_assignment()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment_df"><code class="docutils literal notranslate"><span class="pre">read_cluster_assignment_df()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="inference.pp_cluster.html">inference.pp_cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.radiomics.html">inference.radiomics</a></li>
<li class="toctree-l2"><a class="reference internal" href="inference.swinunetr.html">inference.swinunetr</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.html">app</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HOPE-Segmenter-Kids</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">inference</a></li>
      <li class="breadcrumb-item active">inference.postproc</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/inference.postproc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inference-postproc">
<h1>inference.postproc<a class="headerlink" href="#inference-postproc" title="Link to this heading"></a></h1>
<section id="module-segmenter_backend.inference.postproc.postprocess">
<span id="inference-postproc-postprocess"></span><h2>inference.postproc.postprocess<a class="headerlink" href="#module-segmenter_backend.inference.postproc.postprocess" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.convert_ed_to_ncr">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">convert_ed_to_ncr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#convert_ed_to_ncr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.convert_ed_to_ncr" title="Link to this definition"></a></dt>
<dd><p>Converts peritumoral edema (ED) labels to necrotic and non-enhancing tumor core (NCR).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modified segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.convert_et_to_ncr">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">convert_et_to_ncr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#convert_et_to_ncr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.convert_et_to_ncr" title="Link to this definition"></a></dt>
<dd><p>Converts enhancing tumor (ET) labels to necrotic and non-enhancing tumor core (NCR).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modified segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.convert_labels_back_to_BraTS">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">convert_labels_back_to_BraTS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#convert_labels_back_to_BraTS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.convert_labels_back_to_BraTS" title="Link to this definition"></a></dt>
<dd><p>Converts segmentation labels back to BraTS format.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The converted segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_connected_labels">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_connected_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_connected_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_connected_labels" title="Link to this definition"></a></dt>
<dd><p>Identifies connected components for NCR, ED, and ET labels in the segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg_file</strong> (<em>Path</em>) – Path to the segmentation file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Connected labels for NCR, ED, ET</p></li>
<li><p>Number of connected components for NCR, ED, ET</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[np.ndarray, np.ndarray, np.ndarray, int, int, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_greatest_label">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_greatest_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_greatest_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_greatest_label" title="Link to this definition"></a></dt>
<dd><p>Determines the label with the highest ratio to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The label with the highest ratio and its corresponding ratio value.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[str, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_ratio_ed_wt">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_ratio_ed_wt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_ratio_ed_wt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_ed_wt" title="Link to this definition"></a></dt>
<dd><p>Calculates the ratio of peritumoral edema (ED) voxels to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The ED to WT voxel ratio.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_ratio_et_wt">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_ratio_et_wt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_ratio_et_wt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_et_wt" title="Link to this definition"></a></dt>
<dd><p>Calculates the ratio of enhancing tumor (ET) voxels to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The ET to WT voxel ratio.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_ratio_ncr_wt">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_ratio_ncr_wt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_ratio_ncr_wt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_ncr_wt" title="Link to this definition"></a></dt>
<dd><p>Calculates the ratio of necrotic and non-enhancing tumor core (NCR) voxels to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The NCR to WT voxel ratio.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.get_ratio_tc_wt">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">get_ratio_tc_wt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#get_ratio_tc_wt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.get_ratio_tc_wt" title="Link to this definition"></a></dt>
<dd><p>Calculates the ratio of tumor core (TC) voxels to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The TC to WT voxel ratio.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.maybe_make_dir">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">maybe_make_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#maybe_make_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.maybe_make_dir" title="Link to this definition"></a></dt>
<dd><p>Creates a directory at the specified path if it does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – A string representing the directory path.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.postprocess_batch">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">postprocess_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_to_optimize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.04</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">convert_to_brats_labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#postprocess_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.postprocess_batch" title="Link to this definition"></a></dt>
<dd><p>Postprocesses a batch of segmentation files by optimizing specified labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_folder</strong> (<em>Path</em>) – Path to the input directory containing segmentation files.</p></li>
<li><p><strong>output_folder</strong> (<em>Path</em>) – Path to the output directory to save postprocessed files.</p></li>
<li><p><strong>label_to_optimize</strong> (<em>str</em>) – Label to optimize (“et” or “ed”).</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em>, </em><em>optional</em>) – Threshold ratio for label optimization. Defaults to 0.04.</p></li>
<li><p><strong>convert_to_brats_labels</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to convert labels back to BraTS format. Defaults to False.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.postprocess_image">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">postprocess_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.04</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#postprocess_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.postprocess_image" title="Link to this definition"></a></dt>
<dd><p>Postprocesses the segmentation image by redefining ET or ED labels based on a ratio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p></li>
<li><p><strong>label</strong> (<em>str</em>) – Label to optimize (“et” or “ed”).</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em>, </em><em>optional</em>) – Threshold ratio for label optimization. Defaults to 0.04.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The postprocessed segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.read_image">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">read_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Image</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#read_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.read_image" title="Link to this definition"></a></dt>
<dd><p>Reads an image file and returns the SimpleITK image object and its NumPy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – Path to the image file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The SimpleITK image object and its corresponding NumPy array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[sitk.Image, np.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.redefine_et_ed_labels">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">redefine_et_ed_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'et'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratio</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#redefine_et_ed_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.redefine_et_ed_labels" title="Link to this definition"></a></dt>
<dd><p>Redefines ET or ED labels to NCR in the segmentation based on a specified ratio.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_file</strong> (<em>Path</em>) – Path to the input segmentation file.</p></li>
<li><p><strong>out_file</strong> (<em>Path</em>) – Path to save the postprocessed segmentation file.</p></li>
<li><p><strong>label</strong> (<em>str</em><em>, </em><em>optional</em>) – Label to optimize (“et” or “ed”). Defaults to “et”.</p></li>
<li><p><strong>ratio</strong> (<em>float</em><em>, </em><em>optional</em>) – Threshold ratio for label optimization. Defaults to 0.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The modified segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.remove_disconnected">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">remove_disconnected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_ncr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_ed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_et</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#remove_disconnected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.remove_disconnected" title="Link to this definition"></a></dt>
<dd><p>Removes disconnected small components from the segmentation based on thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg_file</strong> (<em>Path</em>) – Path to the input segmentation file.</p></li>
<li><p><strong>out_file</strong> (<em>Path</em>) – Path to save the cleaned segmentation file.</p></li>
<li><p><strong>t_ncr</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for NCR voxel count. Defaults to 50.</p></li>
<li><p><strong>t_ed</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for ED voxel count. Defaults to 50.</p></li>
<li><p><strong>t_et</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for ET voxel count. Defaults to 50.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of removed NCR, total NCR, removed ED, total ED, removed ET, total ET.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[int, int, int, int, int, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.remove_disconnected_from_dir">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">remove_disconnected_from_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_ncr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_ed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_et</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Path</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#remove_disconnected_from_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.remove_disconnected_from_dir" title="Link to this definition"></a></dt>
<dd><p>Removes disconnected small components from all segmentation files in a directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_dir</strong> (<em>Path</em>) – Path to the input directory containing segmentation files.</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em>) – Path to the output directory to save cleaned segmentation files.</p></li>
<li><p><strong>t_ncr</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for NCR voxel count. Defaults to 50.</p></li>
<li><p><strong>t_ed</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for ED voxel count. Defaults to 50.</p></li>
<li><p><strong>t_et</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for ET voxel count. Defaults to 50.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the output directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess.save_image">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess.</span></span><span class="sig-name descname"><span class="pre">save_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img_sitk</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess.html#save_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess.save_image" title="Link to this definition"></a></dt>
<dd><p>Saves the NumPy array as a NIfTI image with the original image’s metadata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>np.ndarray</em>) – The image array to save.</p></li>
<li><p><strong>img_sitk</strong> (<em>sitk.Image</em>) – The original SimpleITK image object.</p></li>
<li><p><strong>out_path</strong> (<em>Path</em>) – Path to save the new image.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-segmenter_backend.inference.postproc.postprocess_cc">
<span id="inference-postproc-postprocess-cc"></span><h2>inference.postproc.postprocess_cc<a class="headerlink" href="#module-segmenter_backend.inference.postproc.postprocess_cc" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.get_cluster_files">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">get_cluster_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_assignment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#get_cluster_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.get_cluster_files" title="Link to this definition"></a></dt>
<dd><p>Retrieves prediction files that belong to a specific cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_assignment</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – List of cluster assignments with StudyID and cluster.</p></li>
<li><p><strong>cluster_id</strong> (<em>int</em>) – The cluster identifier.</p></li>
<li><p><strong>files_pred</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of all prediction file paths.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of prediction files belonging to the specified cluster.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.get_connected_components">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">get_connected_components</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#get_connected_components"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.get_connected_components" title="Link to this definition"></a></dt>
<dd><p>Identifies connected components for a specific label in the segmentation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>np.ndarray</em>) – The segmentation array.</p></li>
<li><p><strong>value</strong> (<em>int</em>) – The label value to find connected components for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Array with labeled connected components.</p></li>
<li><p>Number of connected components found.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[np.ndarray, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.get_files">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">get_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#get_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.get_files" title="Link to this definition"></a></dt>
<dd><p>Retrieves all prediction file paths from the input directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_folder_pred</strong> (<em>str</em>) – Path to the input directory containing prediction files.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Sorted list of prediction file paths.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_cluster">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">get_thresholds_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thresholds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#get_thresholds_cluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_cluster" title="Link to this definition"></a></dt>
<dd><p>Retrieves threshold settings for a specific cluster within a challenge.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thresholds</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Thresholds for the challenge.</p></li>
<li><p><strong>cluster_name</strong> (<em>str</em>) – The name of the cluster (e.g., “cluster_1”).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Threshold settings for the specified cluster.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the cluster name is not found in the thresholds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_task">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">get_thresholds_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">challenge_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#get_thresholds_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.get_thresholds_task" title="Link to this definition"></a></dt>
<dd><p>Retrieves threshold settings for a specific challenge from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>challenge_name</strong> (<em>str</em>) – The name of the challenge (e.g., BraTS-PED, BraTS-MET).</p></li>
<li><p><strong>input_file</strong> (<em>str</em>) – Path to the JSON file containing thresholds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Thresholds for the specified challenge.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Dict[str, Any]]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the challenge name is not found in the JSON file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.main">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.main" title="Link to this definition"></a></dt>
<dd><p>Main function to execute label redefinition and connected component postprocessing.</p>
<p>Parses command-line arguments, loads necessary data, and performs postprocessing
on prediction files based on cluster assignments and threshold settings.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.parse_args">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Namespace</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.parse_args" title="Link to this definition"></a></dt>
<dd><p>Parses command-line arguments for the BraTS2024 CC Postprocessing script.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Parsed command-line arguments.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>argparse.Namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.postprocess_batch">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">postprocess_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#postprocess_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.postprocess_batch" title="Link to this definition"></a></dt>
<dd><p>Applies postprocessing to a batch of segmentation files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_files</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of input file paths.</p></li>
<li><p><strong>output_folder</strong> (<em>str</em>) – Path to the output directory to save postprocessed files.</p></li>
<li><p><strong>thresholds_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Dictionary containing threshold values for each label.</p></li>
<li><p><strong>label_mapping</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – Mapping from label numbers to label names.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.postprocess_cc">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">postprocess_cc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#postprocess_cc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.postprocess_cc" title="Link to this definition"></a></dt>
<dd><p>Postprocesses the segmentation image by removing small connected components based on thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>np.ndarray</em>) – The original segmentation array.</p></li>
<li><p><strong>thresholds_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Dictionary containing threshold values for each label.</p></li>
<li><p><strong>label_mapping</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – Mapping from label numbers to label names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The postprocessed segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">read_cluster_assignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clusters_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#read_cluster_assignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment" title="Link to this definition"></a></dt>
<dd><p>Reads cluster assignments from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>clusters_json</strong> (<em>str</em>) – Path to the JSON file containing cluster assignments.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List of cluster assignments with StudyID and cluster.</p></li>
<li><p>Sorted list of unique cluster identifiers.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[Dict[str, Any]], List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment_df">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">read_cluster_assignment_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clusterdf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#read_cluster_assignment_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.read_cluster_assignment_df" title="Link to this definition"></a></dt>
<dd><p>Reads cluster assignments from a pandas DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>clusterdf</strong> (<em>pd.DataFrame</em>) – DataFrame containing cluster assignments.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List of cluster assignments with StudyID and cluster.</p></li>
<li><p>Sorted list of unique cluster identifiers.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[Dict[str, Any]], List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_cc.remove_small_component">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_cc.</span></span><span class="sig-name descname"><span class="pre">remove_small_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">challenge_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_folder_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clustersdf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder_pp_cc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_cc.html#remove_small_component"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_cc.remove_small_component" title="Link to this definition"></a></dt>
<dd><p>Removes small connected components from segmentation predictions based on cluster-specific thresholds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>challenge_name</strong> (<em>str</em>) – The name of the challenge (e.g., BraTS-PED, BraTS-MET).</p></li>
<li><p><strong>thresholds_file</strong> (<em>str</em>) – Path to the JSON file containing threshold settings.</p></li>
<li><p><strong>input_folder_pred</strong> (<em>str</em>) – Path to the input directory containing prediction files.</p></li>
<li><p><strong>clustersdf</strong> (<em>pd.DataFrame</em>) – DataFrame containing cluster assignments.</p></li>
<li><p><strong>output_folder_pp_cc</strong> (<em>str</em>) – Path to the output directory to save postprocessed predictions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the output directory containing postprocessed predictions.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-segmenter_backend.inference.postproc.postprocess_lblredef">
<span id="inference-postproc-postprocess-lblredef"></span><h2>inference.postproc.postprocess_lblredef<a class="headerlink" href="#module-segmenter_backend.inference.postproc.postprocess_lblredef" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.get_cluster_files">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">get_cluster_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_assignment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">files_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#get_cluster_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_cluster_files" title="Link to this definition"></a></dt>
<dd><p>Retrieves prediction files that belong to a specific cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cluster_assignment</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – List of cluster assignments with StudyID and cluster.</p></li>
<li><p><strong>cluster_id</strong> (<em>int</em>) – The cluster identifier.</p></li>
<li><p><strong>files_pred</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of all prediction file paths.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of prediction files belonging to the specified cluster.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.get_files">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">get_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_folder_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#get_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_files" title="Link to this definition"></a></dt>
<dd><p>Retrieves all prediction file paths from the input directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_folder_pred</strong> (<em>str</em>) – Path to the input directory containing prediction files.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Sorted list of prediction file paths.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.get_ratio_labels_wt">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">get_ratio_labels_wt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">labels</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#get_ratio_labels_wt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_ratio_labels_wt" title="Link to this definition"></a></dt>
<dd><p>Calculates the ratio of selected label voxels to whole tumor (WT) voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seg</strong> (<em>np.ndarray</em>) – The segmentation array.</p></li>
<li><p><strong>labels</strong> (<em>List</em><em>[</em><em>int</em><em>]</em><em>, </em><em>optional</em>) – List of label integers to include in the ratio. Defaults to [1, 2, 3, 4].</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The ratio of selected label voxels to WT voxels.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_cluster">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">get_thresholds_cluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">thresholds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#get_thresholds_cluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_cluster" title="Link to this definition"></a></dt>
<dd><p>Retrieves threshold settings for a specific cluster within a challenge.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>thresholds</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Thresholds for the challenge.</p></li>
<li><p><strong>cluster_name</strong> (<em>str</em>) – The name of the cluster (e.g., “cluster_1”).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Threshold settings for the specified cluster.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Any]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the cluster name is not found in the thresholds.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_task">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">get_thresholds_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">challenge_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#get_thresholds_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.get_thresholds_task" title="Link to this definition"></a></dt>
<dd><p>Retrieves threshold settings for a specific challenge from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>challenge_name</strong> (<em>str</em>) – The name of the challenge (e.g., BraTS-PED, BraTS-MET).</p></li>
<li><p><strong>input_file</strong> (<em>str</em>) – Path to the JSON file containing thresholds.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Thresholds for the specified challenge.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Dict[str, Dict[str, Any]]</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If the challenge name is not found in the JSON file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.label_redefinition">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">label_redefinition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">challenge_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_folder_pred</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clustersdf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder_pp_cc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#label_redefinition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.label_redefinition" title="Link to this definition"></a></dt>
<dd><p>Performs label redefinition postprocessing for all clusters in the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>challenge_name</strong> (<em>str</em>) – The name of the challenge (e.g., BraTS-PED, BraTS-MET).</p></li>
<li><p><strong>thresholds_file</strong> (<em>str</em>) – Path to the JSON file containing threshold settings.</p></li>
<li><p><strong>input_folder_pred</strong> (<em>str</em>) – Path to the input directory containing prediction files.</p></li>
<li><p><strong>clustersdf</strong> (<em>pd.DataFrame</em>) – DataFrame containing cluster assignments.</p></li>
<li><p><strong>output_folder_pp_cc</strong> (<em>str</em>) – Path to the output directory to save postprocessed predictions.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to the output directory containing postprocessed predictions.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.main">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.main" title="Link to this definition"></a></dt>
<dd><p>Main function to execute label redefinition postprocessing.</p>
<p>Parses command-line arguments, loads necessary data, and performs postprocessing
on prediction files based on cluster assignments and threshold settings.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.parse_args">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Namespace</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.parse_args" title="Link to this definition"></a></dt>
<dd><p>Parses command-line arguments for the BraTS2024 Postprocessing Label Redefinition script.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Parsed command-line arguments.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>argparse.Namespace</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_batch">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">postprocess_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_files</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#postprocess_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_batch" title="Link to this definition"></a></dt>
<dd><p>Applies postprocessing to a batch of segmentation files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_files</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – List of input file paths.</p></li>
<li><p><strong>output_folder</strong> (<em>str</em>) – Path to the output directory to save postprocessed files.</p></li>
<li><p><strong>thresholds_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Dictionary containing threshold values for each label.</p></li>
<li><p><strong>label_mapping</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – Mapping from label numbers to label names.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_lblredef">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">postprocess_lblredef</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thresholds_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#postprocess_lblredef"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.postprocess_lblredef" title="Link to this definition"></a></dt>
<dd><p>Redefines labels in the segmentation image based on threshold criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>np.ndarray</em>) – The original segmentation array.</p></li>
<li><p><strong>thresholds_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Dictionary containing threshold values for each label.</p></li>
<li><p><strong>label_mapping</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>str</em><em>]</em>) – Mapping from label numbers to label names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The postprocessed segmentation array.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">read_cluster_assignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clusters_json</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#read_cluster_assignment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment" title="Link to this definition"></a></dt>
<dd><p>Reads cluster assignments from a JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>clusters_json</strong> (<em>str</em>) – Path to the JSON file containing cluster assignments.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List of cluster assignments with StudyID and cluster.</p></li>
<li><p>Sorted list of unique cluster identifiers.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[Dict[str, Any]], List[int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment_df">
<span class="sig-prename descclassname"><span class="pre">segmenter_backend.inference.postproc.postprocess_lblredef.</span></span><span class="sig-name descname"><span class="pre">read_cluster_assignment_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clusterdf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/segmenter_backend/inference/postproc/postprocess_lblredef.html#read_cluster_assignment_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#segmenter_backend.inference.postproc.postprocess_lblredef.read_cluster_assignment_df" title="Link to this definition"></a></dt>
<dd><p>Reads cluster assignments from a pandas DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>clusterdf</strong> (<em>pd.DataFrame</em>) – DataFrame containing cluster assignments.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p>List of cluster assignments with StudyID and cluster.</p></li>
<li><p>Sorted list of unique cluster identifiers.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Tuple[List[Dict[str, Any]], List[int]]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="inference.nnunet.html" class="btn btn-neutral float-left" title="inference.nnunet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="inference.pp_cluster.html" class="btn btn-neutral float-right" title="inference.pp_cluster" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, PMI Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>